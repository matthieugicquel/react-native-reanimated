"use strict";(self.webpackChunkdocs_reanimated=self.webpackChunkdocs_reanimated||[]).push([[7820],{15680:(e,t,n)=>{n.d(t,{xA:()=>c,yg:()=>y});var o=n(96540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),d=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=d(e.components);return o.createElement(l.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=d(n),p=r,y=u["".concat(l,".").concat(p)]||u[p]||m[p]||a;return n?o.createElement(y,i(i({ref:t},c),{},{components:n})):o.createElement(y,i({ref:t},c))}));function y(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:r,i[1]=s;for(var d=2;d<a;d++)i[d]=n[d];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},58401:(e,t,n)=>{n.d(t,{A:()=>m});var o=n(96540),r=n(9176),a=n(78506),i=n(72188),s=n(52773),l=n(36579),d=n(98348);const c={code:"function RelativeCoordsTsx1(event){const{getRelativeCoords,animatedRef,setCoords}=this.__closure;const relativeCoords=getRelativeCoords(animatedRef,event.absoluteX,event.absoluteY);if(relativeCoords){setCoords(relativeCoords);}}"},u=i.A.create({container:{flex:1,justifyContent:"center",alignItems:"center"},innerView:{width:300,height:300,backgroundColor:"var(--swm-purple-light-80)",justifyContent:"center",alignItems:"center",borderRadius:40,cursor:"pointer"},coordsData:{fontSize:20,fontFamily:"Aeonik",color:"var(--swm-navy-light-100)"},coords:{marginBottom:16,fontWeight:"500"},text:{color:"var(--swm-off-white)",fontFamily:"Aeonik",fontSize:16,fontWeight:"bold"}}),m=()=>{const e=(0,s.useAnimatedRef)(),t=(0,d.A)(),[n,i]=(0,o.useState)({x:0,y:0}),m=l.q6.Tap().onEnd(function(){const t=function(t){const n=(0,s.getRelativeCoords)(e,t.absoluteX,t.absoluteY);n&&i(n)};return t.__closure={getRelativeCoords:s.getRelativeCoords,animatedRef:e,setCoords:i},t.__workletHash=1505519536525,t.__initData=c,t}());return o.createElement(r.A,{style:u.container},o.createElement(a.A,{style:[u.coordsData,t]},"Relative coordinates to parent:"),o.createElement(a.A,{style:[u.coordsData,u.coords,t]},"x=",n.x.toFixed()," y=",n.y.toFixed()),o.createElement(l.Sl,{gesture:m},o.createElement(s.default.View,{ref:e,style:u.innerView},o.createElement(a.A,{style:u.text},"Tap anywhere inside."))))}},98348:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(39235),r=n(72188);const a=()=>{const{colorScheme:e}=(0,o.Ut)();return"light"===e?i.darkText:i.lightText},i=r.A.create({lightText:{color:"var(--swm-off-white)"},darkText:{color:"var(--swm-navy-light-100)"}})},95728:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>g,frontMatter:()=>s,metadata:()=>d,toc:()=>u});var o=n(58168),r=(n(96540),n(15680)),a=n(58401),i=n(60224);const s={sidebar_position:4},l="getRelativeCoords",d={unversionedId:"utilities/getRelativeCoords",id:"version-3.x/utilities/getRelativeCoords",title:"getRelativeCoords",description:"getRelativeCoords determines the location on the screen, relative to the given view.",source:"@site/versioned_docs/version-3.x/utilities/getRelativeCoords.mdx",sourceDirName:"utilities",slug:"/utilities/getRelativeCoords",permalink:"/react-native-reanimated/docs/utilities/getRelativeCoords",draft:!1,editUrl:"https://github.com/software-mansion/react-native-reanimated/edit/main/packages/docs-reanimated/versioned_docs/version-3.x/utilities/getRelativeCoords.mdx",tags:[],version:"3.x",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"interpolateColor",permalink:"/react-native-reanimated/docs/utilities/interpolateColor"},next:{title:"Advanced APIs",permalink:"/react-native-reanimated/docs/category/advanced-apis"}},c={},u=[{value:"Reference",id:"reference",level:2},{value:"Arguments",id:"arguments",level:3},{value:"<code>animatedRef</code>",id:"animatedref",level:4},{value:"<code>absoluteX</code>",id:"absolutex",level:4},{value:"<code>absoluteY</code>",id:"absolutey",level:4},{value:"Returns",id:"returns",level:3},{value:"Example",id:"example",level:3},{value:"Platform compatibility",id:"platform-compatibility",level:2}],m=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.yg)("div",t)},p=m("InteractiveExample"),y=m("PlatformCompatibility"),f={toc:u},v="wrapper";function g(e){let{components:t,...n}=e;return(0,r.yg)(v,(0,o.A)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"getrelativecoords"},"getRelativeCoords"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"getRelativeCoords")," determines the location on the screen, relative to the given view."),(0,r.yg)("h2",{id:"reference"},"Reference"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-tsx"},"import { getRelativeCoords } from 'react-native-reanimated';\n\nconst Comp = () => {\n  const animatedRef = useAnimatedRef();\n  // ...\n\n  const gestureHandler = useAnimatedGestureHandler({\n    onEnd: (event) => {\n      const coords = getRelativeCoords(\n        animatedRef,\n        event.absoluteX,\n        event.absoluteY\n      );\n    },\n  });\n\n  return (\n    <View ref={aref}>\n      <PanGestureHandler onGestureEvent={gestureHandler}>\n        <Animated.View style={[styles.box]} />\n      </PanGestureHandler>\n    </View>\n  );\n};\n")),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Type definitions"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},"function getRelativeCoords(\n  animatedRef: AnimatedRef<Component>,\n  absoluteX: number,\n  absoluteY: number\n): ComponentCoords | null;\n\ninterface ComponentCoords {\n  x: number;\n  y: number;\n}\n"))),(0,r.yg)("h3",{id:"arguments"},"Arguments"),(0,r.yg)("h4",{id:"animatedref"},(0,r.yg)("inlineCode",{parentName:"h4"},"animatedRef")),(0,r.yg)("p",null,"The product of ",(0,r.yg)("a",{parentName:"p",href:"/docs/core/useAnimatedRef"},(0,r.yg)("inlineCode",{parentName:"a"},"useAnimatedRef"))," is Reanimated's extension of a standard React ref (delivers the view tag on the UI thread). This ref should be passed as a prop to the view relative to which we want to know coordinates."),(0,r.yg)("h4",{id:"absolutex"},(0,r.yg)("inlineCode",{parentName:"h4"},"absoluteX")),(0,r.yg)("p",null,"Number which is an absolute ",(0,r.yg)("inlineCode",{parentName:"p"},"x")," coordinate."),(0,r.yg)("h4",{id:"absolutey"},(0,r.yg)("inlineCode",{parentName:"h4"},"absoluteY")),(0,r.yg)("p",null,"Number which is an absolute ",(0,r.yg)("inlineCode",{parentName:"p"},"y")," coordinate."),(0,r.yg)("h3",{id:"returns"},"Returns"),(0,r.yg)("p",null,"Object which contains relative coordinates"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"x")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"y"))),(0,r.yg)("h3",{id:"example"},"Example"),(0,r.yg)(p,{src:i.A,component:a.A,mdxType:"InteractiveExample"}),(0,r.yg)("h2",{id:"platform-compatibility"},"Platform compatibility"),(0,r.yg)(y,{android:!0,ios:!0,web:!0,mdxType:"PlatformCompatibility"}))}g.isMDXComponent=!0},60224:(e,t,n)=>{n.d(t,{A:()=>o});const o="import React, { useState } from 'react';\nimport { View, Text, StyleSheet } from 'react-native';\nimport Animated, {\n  useAnimatedRef,\n  getRelativeCoords,\n} from 'react-native-reanimated';\nimport { Gesture, GestureDetector } from 'react-native-gesture-handler';\nimport useThemedTextStyle from '@site/src/hooks/useThemedTextStyle';\n\nconst RelativeCoords = () => {\n  const animatedRef = useAnimatedRef();\n  const textColor = useThemedTextStyle();\n  const [coords, setCoords] = useState({ x: 0, y: 0 });\n\n  const tapGesture = Gesture.Tap().onEnd((event) => {\n    const relativeCoords = getRelativeCoords(\n      animatedRef,\n      event.absoluteX,\n      event.absoluteY\n    );\n    if (relativeCoords) {\n      setCoords(relativeCoords);\n    }\n  });\n\n  return (\n    <View style={styles.container}>\n      <Text style={[styles.coordsData, textColor]}>\n        Relative coordinates to parent:\n      </Text>\n      <Text style={[styles.coordsData, styles.coords, textColor]}>\n        x={coords.x.toFixed()} y=\n        {coords.y.toFixed()}\n      </Text>\n      <GestureDetector gesture={tapGesture}>\n        <Animated.View ref={animatedRef} style={styles.innerView}>\n          <Text style={styles.text}>Tap anywhere inside.</Text>\n        </Animated.View>\n      </GestureDetector>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  innerView: {\n    width: 300,\n    height: 300,\n    backgroundColor: 'var(--swm-purple-light-80)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 40,\n    cursor: 'pointer',\n  },\n  coordsData: {\n    fontSize: 20,\n    fontFamily: 'Aeonik',\n    color: 'var(--swm-navy-light-100)',\n  },\n  coords: {\n    marginBottom: 16,\n    fontWeight: '500',\n  },\n  text: {\n    color: 'var(--swm-off-white)',\n    fontFamily: 'Aeonik',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n});\n\nexport default RelativeCoords;\n"}}]);
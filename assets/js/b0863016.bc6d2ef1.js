"use strict";(self.webpackChunkdocs_reanimated=self.webpackChunkdocs_reanimated||[]).push([[2127],{15680:(e,t,n)=>{n.d(t,{xA:()=>p,yg:()=>g});var a=n(96540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=u(n),m=r,g=c["".concat(s,".").concat(m)]||c[m]||d[m]||l;return n?a.createElement(g,o(o({ref:t},p),{},{components:n})):a.createElement(g,o({ref:t},p))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[c]="string"==typeof e?e:r,o[1]=i;for(var u=2;u<l;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},19365:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(96540),r=n(20053);const l={tabItem:"tabItem_Ymn6"};function o(e){let{children:t,hidden:n,className:o}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.default)(l.tabItem,o),hidden:n},t)}},84935:(e,t,n)=>{n.d(t,{A:()=>k});var a=n(96540),r=n(58168),l=n(20053),o=n(23104),i=n(56347),s=n(57485),u=n(31682),p=n(89466);function c(e){return function(e){return a.Children.map(e,(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:r}}=e;return{value:t,label:n,attributes:a,default:r}}))}function d(e){const{values:t,children:n}=e;return(0,a.useMemo)((()=>{const e=t??c(n);return function(e){const t=(0,u.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function m(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function g(e){let{queryString:t=!1,groupId:n}=e;const r=(0,i.W6)(),l=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,s.aZ)(l),(0,a.useCallback)((e=>{if(!l)return;const t=new URLSearchParams(r.location.search);t.set(l,e),r.replace({...r.location,search:t.toString()})}),[l,r])]}function y(e){const{defaultValue:t,queryString:n=!1,groupId:r}=e,l=d(e),[o,i]=(0,a.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:l}))),[s,u]=g({queryString:n,groupId:r}),[c,y]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[r,l]=(0,p.Dv)(n);return[r,(0,a.useCallback)((e=>{n&&l.set(e)}),[n,l])]}({groupId:r}),b=(()=>{const e=s??c;return m({value:e,tabValues:l})?e:null})();(0,a.useLayoutEffect)((()=>{b&&i(b)}),[b]);return{selectedValue:o,selectValue:(0,a.useCallback)((e=>{if(!m({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);i(e),u(e),y(e)}),[u,y,l]),tabValues:l}}var b=n(92303);const h={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function f(e){let{className:t,block:n,selectedValue:i,selectValue:s,tabValues:u}=e;const p=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.a_)(),d=e=>{const t=e.currentTarget,n=p.indexOf(t),a=u[n].value;a!==i&&(c(t),s(a))},m=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=p.indexOf(e.currentTarget)+1;t=p[n]??p[0];break}case"ArrowLeft":{const n=p.indexOf(e.currentTarget)-1;t=p[n]??p[p.length-1];break}}t?.focus()};return a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.default)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:o}=e;return a.createElement("li",(0,r.A)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>p.push(e),onKeyDown:m,onClick:d},o,{className:(0,l.default)("tabs__item",h.tabItem,o?.className,{"tabs__item--active":i===t})}),n??t)})))}function v(e){let{lazy:t,children:n,selectedValue:r}=e;const l=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=l.find((e=>e.props.value===r));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return a.createElement("div",{className:"margin-top--md"},l.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==r}))))}function w(e){const t=y(e);return a.createElement("div",{className:(0,l.default)("tabs-container",h.tabList)},a.createElement(f,(0,r.A)({},e,t)),a.createElement(v,(0,r.A)({},e,t)))}function N(e){const t=(0,b.A)();return a.createElement(w,(0,r.A)({key:String(t)},e))}const x={tabs__wrapper:"tabs__wrapper_nLdW"};function k(e){return a.createElement(a.Fragment,null,a.createElement("div",{className:(0,l.default)(x.tabs__wrapper)},a.createElement(N,e)))}},37014:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>g,frontMatter:()=>i,metadata:()=>u,toc:()=>c});var a=n(58168),r=(n(96540),n(15680)),l=n(84935),o=n(19365);const i={id:"web-support",title:"Web Support",sidebar_label:"Web Support"},s=void 0,u={unversionedId:"guides/web-support",id:"guides/web-support",title:"Web Support",description:"It's possible to launch Reanimated in a web browser. For that case all of the functionalities are implemented purely in JavaScript, hence the efficiency of the animations might be lower.",source:"@site/docs/guides/web-support.mdx",sourceDirName:"guides",slug:"/guides/web-support",permalink:"/react-native-reanimated/docs/next/guides/web-support",draft:!1,editUrl:"https://github.com/software-mansion/react-native-reanimated/edit/main/packages/docs-reanimated/docs/guides/web-support.mdx",tags:[],version:"current",frontMatter:{id:"web-support",title:"Web Support",sidebar_label:"Web Support"},sidebar:"tutorialSidebar",previous:{title:"Troubleshooting",permalink:"/react-native-reanimated/docs/next/guides/troubleshooting"},next:{title:"Reanimated Babel plugin",permalink:"/react-native-reanimated/docs/next/category/reanimated-babel-plugin"}},p={},c=[{value:"Step 1: Install the package",id:"step-1-install-the-package",level:3},{value:"Step 2: Add plugins to config file",id:"step-2-add-plugins-to-config-file",level:3},{value:"Step 3: Launch your app",id:"step-3-launch-your-app",level:3},{value:"Webpack support",id:"webpack-support",level:2},{value:"Web without the Babel plugin",id:"web-without-the-babel-plugin",level:2},{value:"ESLint Support",id:"eslint-support",level:3},{value:"Solito / Next.js Compatibility",id:"solito--nextjs-compatibility",level:2},{value:"Next.js Polyfill",id:"nextjs-polyfill",level:3}],d={toc:c},m="wrapper";function g(e){let{components:t,...n}=e;return(0,r.yg)(m,(0,a.A)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"It's possible to launch Reanimated in a web browser. For that case all of the functionalities are implemented purely in JavaScript, hence the efficiency of the animations might be lower."),(0,r.yg)("h3",{id:"step-1-install-the-package"},"Step 1: Install the package"),(0,r.yg)("p",null,"Install ",(0,r.yg)("a",{parentName:"p",href:"https://babeljs.io/docs/babel-plugin-transform-export-namespace-from"},(0,r.yg)("inlineCode",{parentName:"a"},"@babel/plugin-proposal-export-namespace-from")),":"),(0,r.yg)(l.A,{groupId:"package-managers",mdxType:"Tabs"},(0,r.yg)(o.A,{value:"expo",label:"EXPO",default:!0,mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"npx expo install @babel/plugin-proposal-export-namespace-from\n"))),(0,r.yg)(o.A,{value:"npm",label:"NPM",mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"npm install @babel/plugin-proposal-export-namespace-from\n"))),(0,r.yg)(o.A,{value:"yarn",label:"YARN",mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"yarn add @babel/plugin-proposal-export-namespace-from\n")))),(0,r.yg)("h3",{id:"step-2-add-plugins-to-config-file"},"Step 2: Add plugins to config file"),(0,r.yg)("p",null,"Add ",(0,r.yg)("inlineCode",{parentName:"p"},"@babel/plugin-proposal-export-namespace-from")," and Reanimated Babel plugin to your ",(0,r.yg)("inlineCode",{parentName:"p"},"babel.config.js"),"."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js",metastring:"{7,8}","{7,8}":!0},"  module.exports = {\n      presets: [\n        ... // don't add it here :)\n      ],\n      plugins: [\n          ...\n          '@babel/plugin-proposal-export-namespace-from',\n          'react-native-worklets/plugin',\n      ],\n  };\n")),(0,r.yg)("admonition",{type:"caution"},(0,r.yg)("p",{parentName:"admonition"},"Make sure to list ",(0,r.yg)("inlineCode",{parentName:"p"},"react-native-worklets/plugin")," last.")),(0,r.yg)("h3",{id:"step-3-launch-your-app"},"Step 3: Launch your app"),(0,r.yg)("p",null,"If you use\n",(0,r.yg)("a",{parentName:"p",href:"https://github.com/software-mansion-labs/reanimated-3-playground"},"playground"),"\napp and want to start it in the browser just type:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-shell"},"yarn web\n")),(0,r.yg)("p",null,"If you want to start the example applications from the\n",(0,r.yg)("a",{parentName:"p",href:"https://github.com/software-mansion/react-native-reanimated"},"reanimated repository")," you need to run the following commands inside respository root:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-shell"},"yarn && yarn build\n")),(0,r.yg)("p",null,"Then run inside the ",(0,r.yg)("inlineCode",{parentName:"p"},"apps/web-example")," directory:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-shell"},"yarn start\n")),(0,r.yg)("h2",{id:"webpack-support"},"Webpack support"),(0,r.yg)("p",null,"If you want to use Reanimated in a ",(0,r.yg)("inlineCode",{parentName:"p"},"webpack")," app you should adjust your ",(0,r.yg)("inlineCode",{parentName:"p"},"webpack")," config."),(0,r.yg)("p",null,"Example webpack config file with Reanimated support:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const HtmlWebpackPlugin = require('html-webpack-plugin');\nconst webpack = require('webpack');\n\nmodule.exports = {\n  entry: ['babel-polyfill', './index.js'],\n  plugins: [\n    new HtmlWebpackPlugin({\n      filename: 'index.html',\n      template: './index.html',\n    }),\n    new webpack.EnvironmentPlugin({ JEST_WORKER_ID: null }),\n    new webpack.DefinePlugin({ process: { env: {} } }),\n  ],\n  module: {\n    rules: [\n      {\n        test: /\\.(js|jsx)$/,\n        use: {\n          loader: 'babel-loader',\n          options: {\n            presets: [\n              '@babel/preset-react',\n              { plugins: ['@babel/plugin-proposal-class-properties'] },\n            ],\n          },\n        },\n      },\n    ],\n  },\n  resolve: {\n    alias: { 'react-native$': 'react-native-web' },\n    extensions: ['.web.js', '.js'],\n  },\n};\n")),(0,r.yg)("h2",{id:"web-without-the-babel-plugin"},"Web without the Babel plugin"),(0,r.yg)("p",null,"It is possible to use Reanimated without the Babel plugin (",(0,r.yg)("inlineCode",{parentName:"p"},"react-native-worklets/plugin")," on the Web, with some additional configuration."),(0,r.yg)("p",null,"Reanimated hooks all accept optional dependency arrays. Under the hood, the Reanimated Babel plugin inserts these for you."),(0,r.yg)("p",null,"In order to use Reanimated without a Babel/SWC plugin, you need to explicitly pass the dependency array whenever you use a Reanimated hook."),(0,r.yg)("p",null,"Passing a dependency array is valid on both Web and native. Adding them will not negatively impact iOS or Android."),(0,r.yg)("p",null,"Make sure the following hooks have a dependency array as the last argument:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"useDerivedValue")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"useAnimatedStyle")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"useAnimatedProps")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"useAnimatedReaction"))),(0,r.yg)("p",null,"For example:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-ts"},"const sv = useSharedValue(0);\nconst dv = useDerivedValue(\n  () => sv.value + 1,\n  [sv] // dependency array here\n);\n")),(0,r.yg)("p",null,"Be sure to pass the dependency itself (",(0,r.yg)("inlineCode",{parentName:"p"},"sv"),") and not ",(0,r.yg)("inlineCode",{parentName:"p"},"sv.value")," to the dependency array."),(0,r.yg)("admonition",{type:"caution"},(0,r.yg)("p",{parentName:"admonition"},"Babel users will still need to install the ",(0,r.yg)("inlineCode",{parentName:"p"},"@babel/plugin-proposal-class-properties")," plugin.")),(0,r.yg)("h3",{id:"eslint-support"},"ESLint Support"),(0,r.yg)("p",null,"When you use hooks from React, they give you nice suggestions from ESLint to include all dependencies. In order to add this support to Reanimated hooks, add the following to your ESLint config:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "rules": {\n    "react-hooks/exhaustive-deps": [\n      "error",\n      {\n        "additionalHooks": "(useAnimatedStyle|useDerivedValue|useAnimatedProps)"\n      }\n    ]\n  }\n}\n')),(0,r.yg)("admonition",{type:"info"},(0,r.yg)("p",{parentName:"admonition"},"This assumes you've already installed the ",(0,r.yg)("inlineCode",{parentName:"p"},"react-hooks")," eslint ",(0,r.yg)("a",{parentName:"p",href:"https://www.npmjs.com/package/eslint-plugin-react-hooks"},"plugin"),".")),(0,r.yg)("p",null,"If you're using ESLint autofix, the ESLint plugin may add ",(0,r.yg)("inlineCode",{parentName:"p"},".value")," to the dependency arrays, rather than the root dependency. In these cases, you should update the array yourself."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-tsx"},"const sv = useSharedValue(0);\n\n// \ud83d\udea8 bad, sv.value is in the array\nconst dv = useDerivedValue(() => sv.value, [sv.value]);\n\n// \u2705 good, sv is in the array\nconst dv = useDerivedValue(() => sv.value, [sv]);\n")),(0,r.yg)("h2",{id:"solito--nextjs-compatibility"},"Solito / Next.js Compatibility"),(0,r.yg)("p",null,"There is an experimental SWC plugin in the works. However, given that this may not work properly, you can use the ",(0,r.yg)("a",{parentName:"p",href:"#web-without-a-babel-plugin"},"Web without a Babel plugin")," instructions above."),(0,r.yg)("h3",{id:"nextjs-polyfill"},"Next.js Polyfill"),(0,r.yg)("p",null,"In order to use Reanimated with Next.js / Solito, you'll need to add the ",(0,r.yg)("inlineCode",{parentName:"p"},"raf")," polyfill for ",(0,r.yg)("inlineCode",{parentName:"p"},"requestAnimationFrame")," to not throw on the server:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sh"},"yarn add raf\n")),(0,r.yg)("p",null,"Add the following to the top of your ",(0,r.yg)("inlineCode",{parentName:"p"},"_app.tsx"),":"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-ts"},"import 'raf/polyfill';\n")))}g.isMDXComponent=!0}}]);
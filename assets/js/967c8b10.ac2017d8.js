"use strict";(self.webpackChunkdocs_reanimated=self.webpackChunkdocs_reanimated||[]).push([[7189],{43257:(e,n,t)=>{t.d(n,{A:()=>m});var a=t(96540),r=t(9176),i=t(62257),o=t(72188),s=t(55535),l=t(9988);const p=s.default.createAnimatedComponent(l.jl),d={code:"function AnimatingPropsTsx1(){const{withTiming,r}=this.__closure;return{r:withTiming(r.value)};}"};function m(){const e=(0,s.useSharedValue)(20),n=(0,s.useAnimatedProps)(function(){const n=()=>({r:(0,s.withTiming)(e.value)});return n.__closure={withTiming:s.withTiming,r:e},n.__workletHash=5140780619767,n.__initData=d,n}());return a.createElement(r.A,{style:c.container},a.createElement(l.BS,{style:c.svg},a.createElement(p,{cx:"50%",cy:"50%",fill:"#b58df1",animatedProps:n})),a.createElement(i.A,{onPress:()=>{e.value+=10},title:"Click me"}))}const c=o.A.create({container:{flex:1,alignItems:"center"},svg:{height:250,width:"100%"}})},48387:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>m,contentTitle:()=>p,default:()=>b,frontMatter:()=>l,metadata:()=>d,toc:()=>c});var a=t(58168),r=(t(96540),t(15680)),i=t(88157),o=t(43257),s=t(75860);const l={sidebar_position:3},p="useAnimatedProps",d={unversionedId:"core/useAnimatedProps",id:"version-3.x/core/useAnimatedProps",title:"useAnimatedProps",description:"useAnimatedProps lets you create an animated props object which can be animated using shared values. This object is used to animate properties of third-party components.",source:"@site/versioned_docs/version-3.x/core/useAnimatedProps.mdx",sourceDirName:"core",slug:"/core/useAnimatedProps",permalink:"/react-native-reanimated/docs/core/useAnimatedProps",draft:!1,editUrl:"https://github.com/software-mansion/react-native-reanimated/edit/main/packages/docs-reanimated/versioned_docs/version-3.x/core/useAnimatedProps.mdx",tags:[],version:"3.x",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"useAnimatedStyle",permalink:"/react-native-reanimated/docs/core/useAnimatedStyle"},next:{title:"useAnimatedRef",permalink:"/react-native-reanimated/docs/core/useAnimatedRef"}},m={},c=[{value:"Reference",id:"reference",level:2},{value:"Arguments",id:"arguments",level:3},{value:"<code>updater</code>",id:"updater",level:4},{value:"<code>dependencies</code> <Optional/>",id:"dependencies-",level:4},{value:"<code>adapters</code> <Optional/>",id:"adapters-",level:4},{value:"Color-related properties",id:"color-related-properties",level:3},{value:"Returns",id:"returns",level:2},{value:"Example",id:"example",level:2},{value:"Remarks",id:"remarks",level:2},{value:"Platform compatibility",id:"platform-compatibility",level:2}],u=e=>function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.yg)("div",n)},g=u("Optional"),y=u("CollapsibleCode"),h=u("InteractiveExample"),f=u("PlatformCompatibility"),v={toc:c},A="wrapper";function b(e){let{components:n,...t}=e;return(0,r.yg)(A,(0,a.A)({},v,t,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"useanimatedprops"},"useAnimatedProps"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"useAnimatedProps")," lets you create an animated props object which can be animated using ",(0,r.yg)("a",{parentName:"p",href:"/docs/fundamentals/glossary#shared-value"},"shared values"),". This object is used to animate properties of third-party components."),(0,r.yg)("p",null,"For animating style use ",(0,r.yg)("a",{parentName:"p",href:"/docs/core/useAnimatedStyle"},(0,r.yg)("inlineCode",{parentName:"a"},"useAnimatedStyle"))," instead."),(0,r.yg)("h2",{id:"reference"},"Reference"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-jsx"},"import { useAnimatedProps } from 'react-native-reanimated';\n\nfunction App() {\n  // highlight-next-line\n  const animatedProps = useAnimatedProps(() => {\n    return {\n      opacity: sv.value ? 1 : 0,\n    };\n    // highlight-next-line\n  });\n\n  // highlight-next-line\n  return <Animated.View animatedProps={animatedProps} />;\n}\n")),(0,r.yg)("details",null,(0,r.yg)("summary",null,"Type definitions"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-typescript"},"function useAnimatedProps<T extends {}>(\n  updater: () => Partial<T>,\n  dependencies?: DependencyList | null,\n  adapters?: PropsAdapterFunction | PropsAdapterFunction[] | null\n): Partial<T>;\n"))),(0,r.yg)("h3",{id:"arguments"},"Arguments"),(0,r.yg)("h4",{id:"updater"},(0,r.yg)("inlineCode",{parentName:"h4"},"updater")),(0,r.yg)("p",null,"A function returning an object with properties you want to animate."),(0,r.yg)("h4",{id:"dependencies-"},(0,r.yg)("inlineCode",{parentName:"h4"},"dependencies")," ",(0,r.yg)(g,{mdxType:"Optional"})),(0,r.yg)("p",null,"An optional array of dependencies."),(0,r.yg)("p",null,"Only relevant when using Reanimated ",(0,r.yg)("a",{parentName:"p",href:"https://docs.swmansion.com/react-native-reanimated/docs/guides/web-support#web-without-the-babel-plugin"},"without the Babel plugin on the Web"),"."),(0,r.yg)("h4",{id:"adapters-"},(0,r.yg)("inlineCode",{parentName:"h4"},"adapters")," ",(0,r.yg)(g,{mdxType:"Optional"})),(0,r.yg)("p",null,"An optional function or an array of functions."),(0,r.yg)("p",null,"Sometimes when working with third-party libraries properties might be named differently on the API surface from what they really represent on the native side. Adapters make it possible to handle these cases by defining a way to convert these props."),(0,r.yg)("p",null,"Reanimated comes with two built-in adapters:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://github.com/software-mansion/react-native-reanimated/blob/Reanimated2/src/reanimated2/PropAdapters.ts#L19"},(0,r.yg)("inlineCode",{parentName:"a"},"SVGAdapter"))," for handling ",(0,r.yg)("inlineCode",{parentName:"li"},"transform")," property in ",(0,r.yg)("inlineCode",{parentName:"li"},"react-native-svg")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://github.com/software-mansion/react-native-reanimated/blob/Reanimated2/src/reanimated2/PropAdapters.ts#L57"},(0,r.yg)("inlineCode",{parentName:"a"},"TextInputAdapter")),".")),(0,r.yg)("p",null,"You can create your own adapters using ",(0,r.yg)("inlineCode",{parentName:"p"},"createAnimatedPropAdapter")," function."),(0,r.yg)("p",null,"Here's an example of adapting ",(0,r.yg)("inlineCode",{parentName:"p"},"fill")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"stroke")," properties from ",(0,r.yg)("inlineCode",{parentName:"p"},"react-native-svg")," to be able to animate them with Reanimated."),(0,r.yg)(y,{showLines:[13,25],src:i.A,mdxType:"CollapsibleCode"}),(0,r.yg)("h3",{id:"color-related-properties"},"Color-related properties"),(0,r.yg)("p",null,"Color-related properties that come from custom components won't work in most cases as these props are in a format incomprehensible for native side.\nFor most commonly used color-related properties we integrated the color processing to our code, managed by our predefined list in ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/software-mansion/react-native-reanimated/blob/main/packages/react-native-reanimated/src/Colors.ts#L332"},"Colors.ts")," file."),(0,r.yg)("p",null,"However, when your desired color property is not on the list and you want to use it with ",(0,r.yg)("inlineCode",{parentName:"p"},"useAnimatedProps")," - manual processing is necessary. You need to explicitly wrap such color properties with ",(0,r.yg)("inlineCode",{parentName:"p"},"processColor")," function to ensure they are correctly interpreted by the native side."),(0,r.yg)("p",null,"You can check full list of automatically processed props here - ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/software-mansion/react-native-reanimated/blob/main/packages/react-native-reanimated/src/Colors.ts#L332"},"Colors.ts")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-jsx"},"// highlight-next-line\nimport { processColor } from 'react-native-reanimated';\n\nfunction App() {\n  const animatedProps = useAnimatedProps(() => {\n    const mainColor = interpolateColor(\n      colorProgress.value,\n      [0, 1],\n      ['red', 'blue']\n    );\n\n    const bgColor = interpolateColor(\n      colorProgress.value,\n      [0, 1],\n      ['green', 'yellow']\n    );\n\n    return {\n      // `colors` prop is not on our list - we need to process it manually\n      // highlight-next-line\n      colors: processColor([mainColor, bgColor]),\n    };\n  });\n}\n")),(0,r.yg)("h2",{id:"returns"},"Returns"),(0,r.yg)("p",null,(0,r.yg)("inlineCode",{parentName:"p"},"useAnimatedProps")," returns an animated props object which has to be passed to ",(0,r.yg)("inlineCode",{parentName:"p"},"animatedProps")," property of an ",(0,r.yg)("a",{parentName:"p",href:"/docs/fundamentals/glossary#animated-component"},"Animated component")," that you want to animate."),(0,r.yg)("h2",{id:"example"},"Example"),(0,r.yg)(h,{src:s.A,component:o.A,mdxType:"InteractiveExample"}),(0,r.yg)("h2",{id:"remarks"},"Remarks"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"You can share animated props between components to avoid code duplication."),(0,r.yg)("li",{parentName:"ul"},"We recommend to create adapters outside of the component's body to avoid unnecessary recalculations.")),(0,r.yg)("h2",{id:"platform-compatibility"},"Platform compatibility"),(0,r.yg)(f,{android:!0,ios:!0,web:!0,mdxType:"PlatformCompatibility"}))}b.isMDXComponent=!0},88157:(e,n,t)=>{t.d(n,{A:()=>a});const a="import React from 'react';\nimport { Svg, Ellipse } from 'react-native-svg';\nimport Animated, {\n  createAnimatedPropAdapter,\n  processColor,\n  useAnimatedProps,\n  useSharedValue,\n  withRepeat,\n  withTiming,\n} from 'react-native-reanimated';\n\nconst AnimatedEllipse = Animated.createAnimatedComponent(Ellipse);\n\n// highlight-next-line\nconst adapter = createAnimatedPropAdapter(\n  (props) => {\n    if (Object.keys(props).includes('fill')) {\n      props.fill = { type: 0, payload: processColor(props.fill) };\n    }\n    if (Object.keys(props).includes('stroke')) {\n      props.stroke = { type: 0, payload: processColor(props.stroke) };\n    }\n  },\n  ['fill', 'stroke']\n  // highlight-next-line\n);\n\nexport default function App() {\n  const opacity = useSharedValue<number>(0);\n\n  React.useEffect(() => {\n    opacity.value = withRepeat(withTiming(1), -1, true);\n  }, []);\n\n  const ellipseAnimatedProps = useAnimatedProps(\n    () => {\n      const coordinates = { cx: 50, cy: 50, rx: 40, ry: 40 };\n\n      return {\n        cx: coordinates.cx,\n        cy: coordinates.cy,\n        rx: coordinates.rx,\n        ry: coordinates.ry,\n        stroke: 'rgb(255,0,0)',\n        fill: 'yellow',\n        opacity: opacity.value,\n        strokeWidth: 2,\n      };\n    },\n    [],\n    // highlight-next-line\n    adapter\n  );\n\n  return (\n    <Svg width=\"100%\" height=\"100%\">\n      <AnimatedEllipse animatedProps={ellipseAnimatedProps} />\n    </Svg>\n  );\n}\n"},75860:(e,n,t)=>{t.d(n,{A:()=>a});const a="import React from 'react';\nimport { Button, View, StyleSheet } from 'react-native';\nimport Animated, {\n  useSharedValue,\n  useAnimatedProps,\n  withTiming,\n} from 'react-native-reanimated';\nimport { Svg, Circle } from 'react-native-svg';\n\nconst AnimatedCircle = Animated.createAnimatedComponent(Circle);\n\nexport default function App() {\n  const r = useSharedValue<number>(20);\n\n  const handlePress = () => {\n    r.value += 10;\n  };\n\n  // highlight-start\n  const animatedProps = useAnimatedProps(() => ({\n    r: withTiming(r.value),\n  }));\n  // highlight-end\n\n  return (\n    <View style={styles.container}>\n      <Svg style={styles.svg}>\n        <AnimatedCircle\n          cx=\"50%\"\n          cy=\"50%\"\n          fill=\"#b58df1\"\n          // highlight-next-line\n          animatedProps={animatedProps}\n        />\n      </Svg>\n      <Button onPress={handlePress} title=\"Click me\" />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n  },\n  svg: {\n    height: 250,\n    width: '100%',\n  },\n});\n"}}]);
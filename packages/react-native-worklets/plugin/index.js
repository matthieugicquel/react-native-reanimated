"use strict";var st=Object.create;var ge=Object.defineProperty;var at=Object.getOwnPropertyDescriptor;var lt=Object.getOwnPropertyNames;var ct=Object.getPrototypeOf,ut=Object.prototype.hasOwnProperty;var p=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var dt=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of lt(t))!ut.call(e,n)&&n!==r&&ge(e,n,{get:()=>t[n],enumerable:!(i=at(t,n))||i.enumerable});return e};var P=(e,t,r)=>(r=e!=null?st(ct(e)):{},dt(t||!e||!e.__esModule?ge(r,"default",{value:e,enumerable:!0}):r,e));var Oe=p(C=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});C.isGestureObjectEventCallbackMethod=C.isGestureHandlerEventCallback=C.gestureHandlerBuilderMethods=void 0;var x=require("@babel/types"),ft=new Set(["Tap","Pan","Pinch","Rotation","Fling","LongPress","ForceTouch","Native","Manual","Race","Simultaneous","Exclusive","Hover"]);C.gestureHandlerBuilderMethods=new Set(["onBegin","onStart","onEnd","onFinalize","onUpdate","onChange","onTouchesDown","onTouchesMove","onTouchesUp","onTouchesCancelled"]);function pt(e){return(0,x.isCallExpression)(e.parent)&&(0,x.isExpression)(e.parent.callee)&&_e(e.parent.callee)}C.isGestureHandlerEventCallback=pt;function _e(e){return(0,x.isMemberExpression)(e)&&(0,x.isIdentifier)(e.property)&&C.gestureHandlerBuilderMethods.has(e.property.name)&&ve(e.object)}C.isGestureObjectEventCallbackMethod=_e;function ve(e){return!!(mt(e)||(0,x.isCallExpression)(e)&&(0,x.isMemberExpression)(e.callee)&&ve(e.callee.object))}function mt(e){return(0,x.isCallExpression)(e)&&(0,x.isMemberExpression)(e.callee)&&(0,x.isIdentifier)(e.callee.object)&&e.callee.object.name==="Gesture"&&(0,x.isIdentifier)(e.callee.property)&&ft.has(e.callee.property.name)}});var Ie=p(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.isLayoutAnimationCallback=void 0;var W=require("@babel/types"),bt=new Set(["BounceIn","BounceInDown","BounceInLeft","BounceInRight","BounceInUp","BounceOut","BounceOutDown","BounceOutLeft","BounceOutRight","BounceOutUp","FadeIn","FadeInDown","FadeInLeft","FadeInRight","FadeInUp","FadeOut","FadeOutDown","FadeOutLeft","FadeOutRight","FadeOutUp","FlipInEasyX","FlipInEasyY","FlipInXDown","FlipInXUp","FlipInYLeft","FlipInYRight","FlipOutEasyX","FlipOutEasyY","FlipOutXDown","FlipOutXUp","FlipOutYLeft","FlipOutYRight","LightSpeedInLeft","LightSpeedInRight","LightSpeedOutLeft","LightSpeedOutRight","PinwheelIn","PinwheelOut","RollInLeft","RollInRight","RollOutLeft","RollOutRight","RotateInDownLeft","RotateInDownRight","RotateInUpLeft","RotateInUpRight","RotateOutDownLeft","RotateOutDownRight","RotateOutUpLeft","RotateOutUpRight","SlideInDown","SlideInLeft","SlideInRight","SlideInUp","SlideOutDown","SlideOutLeft","SlideOutRight","SlideOutUp","StretchInX","StretchInY","StretchOutX","StretchOutY","ZoomIn","ZoomInDown","ZoomInEasyDown","ZoomInEasyUp","ZoomInLeft","ZoomInRight","ZoomInRotate","ZoomInUp","ZoomOut","ZoomOutDown","ZoomOutEasyDown","ZoomOutEasyUp","ZoomOutLeft","ZoomOutRight","ZoomOutRotate","ZoomOutUp"]),yt=new Set(["Layout","LinearTransition","SequencedTransition","FadingTransition","JumpingTransition","CurvedTransition","EntryExitTransition"]),he=new Set([...bt,...yt]),kt=new Set(["build","duration","delay","getDuration","randomDelay","getDelay","getDelayFunction"]),gt=new Set(["easing","rotate","springify","damping","mass","stiffness","overshootClamping","restDisplacementThreshold","restSpeedThreshold","withInitialValues","getAnimationAndConfig"]),_t=new Set(["easingX","easingY","easingWidth","easingHeight","entering","exiting","reverse"]),vt=new Set([...kt,...gt,..._t]),Ot=new Set(["withCallback"]);function ht(e){return(0,W.isCallExpression)(e.parent)&&(0,W.isExpression)(e.parent.callee)&&Et(e.parent.callee)}Y.isLayoutAnimationCallback=ht;function Et(e){return(0,W.isMemberExpression)(e)&&(0,W.isIdentifier)(e.property)&&Ot.has(e.property.name)&&Ee(e.object)}function Ee(e){return(0,W.isIdentifier)(e)&&he.has(e.name)?!0:!!((0,W.isNewExpression)(e)&&(0,W.isIdentifier)(e.callee)&&he.has(e.callee.name)||(0,W.isCallExpression)(e)&&(0,W.isMemberExpression)(e.callee)&&(0,W.isIdentifier)(e.callee.property)&&vt.has(e.callee.property.name)&&Ee(e.callee.object))}});var w=p(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.workletClassFactorySuffix=k.isWorkletizableObjectNode=k.isWorkletizableObjectPath=k.isWorkletizableFunctionNode=k.isWorkletizableFunctionPath=k.WorkletizableObject=k.WorkletizableFunction=void 0;var V=require("@babel/types");k.WorkletizableFunction="FunctionDeclaration|FunctionExpression|ArrowFunctionExpression|ObjectMethod";k.WorkletizableObject="ObjectExpression";function It(e){return e.isFunctionDeclaration()||e.isFunctionExpression()||e.isArrowFunctionExpression()||e.isObjectMethod()}k.isWorkletizableFunctionPath=It;function St(e){return(0,V.isFunctionDeclaration)(e)||(0,V.isFunctionExpression)(e)||(0,V.isArrowFunctionExpression)(e)||(0,V.isObjectMethod)(e)}k.isWorkletizableFunctionNode=St;function xt(e){return e.isObjectExpression()}k.isWorkletizableObjectPath=xt;function Wt(e){return(0,V.isObjectExpression)(e)}k.isWorkletizableObjectNode=Wt;k.workletClassFactorySuffix="__classFactory"});var z=p(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.replaceWithFactoryCall=q.isRelease=void 0;var Z=require("@babel/types");function wt(){var e,t;let r=/(prod|release|stag[ei])/i;return!!(!((e=process.env.BABEL_ENV)===null||e===void 0)&&e.match(r)||!((t=process.env.NODE_ENV)===null||t===void 0)&&t.match(r))}q.isRelease=wt;function Ct(e,t,r){if(!t||!jt(e))e.replaceWith(r);else{let i=(0,Z.variableDeclaration)("const",[(0,Z.variableDeclarator)((0,Z.identifier)(t),r)]);e.replaceWith(i)}}q.replaceWithFactoryCall=Ct;function jt(e){return(0,Z.isScopable)(e.parent)||(0,Z.isExportNamedDeclaration)(e.parent)}});var le=p(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.addCustomGlobals=g.initializeGlobals=g.globals=g.defaultGlobals=g.initializeState=void 0;var Ft=["globalThis","Infinity","NaN","undefined","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape","Object","Function","Boolean","Symbol","Error","AggregateError","EvalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError","InternalError","Number","BigInt","Math","Date","String","RegExp","Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","BigInt64Array","BigUint64Array","Float32Array","Float64Array","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Atomics","JSON","WeakRef","FinalizationRegistry","Iterator","AsyncIterator","Promise","GeneratorFunction","AsyncGeneratorFunction","Generator","AsyncGenerator","AsyncFunction","Reflect","Proxy","Intl","null","this","global","window","globalThis","console","performance","queueMicrotask","requestAnimationFrame","setImmediate","arguments","HermesInternal","ReanimatedError","_WORKLET","WorkletsError","__workletsLoggerConfig"],Dt=["_IS_FABRIC","_log","_toString","_scheduleHostFunctionOnJS","_scheduleRemoteFunctionOnJS","_scheduleOnRuntime","_makeShareableClone","_updateProps","_measure","_dispatchCommand","_setGestureState","_notifyAboutProgress","_notifyAboutEnd","_runOnUIQueue","_getAnimationTimestamp"];function Mt(e){e.workletNumber=1,e.classesToWorkletize=[],Se(),xe(e)}g.initializeState=Mt;g.defaultGlobals=new Set(Ft.concat(Dt));function Se(){g.globals=new Set(g.defaultGlobals)}g.initializeGlobals=Se;function xe(e){e.opts&&Array.isArray(e.opts.globals)&&e.opts.globals.forEach(t=>{g.globals.add(t)})}g.addCustomGlobals=xe});var K=p(L=>{"use strict";var Rt=L&&L.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r};Object.defineProperty(L,"__esModule",{value:!0});L.workletTransformSync=void 0;var At=require("@babel/core");function Pt(e,t){let{extraPlugins:r=[],extraPresets:i=[]}=t,n=Rt(t,["extraPlugins","extraPresets"]);return(0,At.transformSync)(e,Object.assign(Object.assign({},n),{plugins:[...zt,...r],presets:[...qt,...i]}))}L.workletTransformSync=Pt;var qt=[require.resolve("@babel/preset-typescript")],zt=[]});var Ce=p(_=>{"use strict";var Lt=_&&_.__createBinding||(Object.create?function(e,t,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}),Tt=_&&_.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),We=_&&_.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Lt(t,e,r);return Tt(t,e),t},Nt=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_,"__esModule",{value:!0});_.buildWorkletString=void 0;var we=require("@babel/core"),Bt=Nt(require("@babel/generator")),c=require("@babel/types"),J=require("assert"),Ut=We(require("convert-source-map")),Gt=We(require("fs")),Ht=K(),Vt=w(),Zt=z(),Jt="mock source map";function Xt(e,t,r,i,n){var s;$t(e,i);let u=e.program.body.find(O=>(0,c.isFunctionDeclaration)(O))||e.program.body.find(O=>(0,c.isExpressionStatement)(O))||void 0;(0,J.strict)(u,"[Reanimated] `draftExpression` is undefined.");let a=(0,c.isFunctionDeclaration)(u)?u:u.expression;(0,J.strict)("params"in a,"'params' property is undefined in 'expression'"),(0,J.strict)((0,c.isBlockStatement)(a.body),"[Reanimated] `expression.body` is not a `BlockStatement`");let y=new Set;(0,we.traverse)(e,{NewExpression(O){if(!(0,c.isIdentifier)(O.node.callee))return;let h=O.node.callee.name;if(!r.some($=>$.name===h)||y.has(h))return;let X=r.findIndex($=>$.name===h);r.splice(X,1);let R=h+Vt.workletClassFactorySuffix;r.push((0,c.identifier)(R)),(0,c.assertBlockStatement)(a.body),a.body.body.unshift((0,c.variableDeclaration)("const",[(0,c.variableDeclarator)((0,c.identifier)(h),(0,c.callExpression)((0,c.identifier)(R),[]))])),y.add(h)}});let d=(0,c.functionExpression)((0,c.identifier)(i),a.params,a.body,a.generator,a.async),I=(0,Bt.default)(d).code;(0,J.strict)(n,"[Reanimated] `inputMap` is undefined.");let D=!((0,Zt.isRelease)()||t.opts.disableSourceMaps);if(D){n.sourcesContent=[];for(let O of n.sources)n.sourcesContent.push(Gt.readFileSync(O).toString("utf-8"))}let S=(0,Ht.workletTransformSync)(I,{filename:t.file.opts.filename,extraPlugins:[er(r),...(s=t.opts.extraPlugins)!==null&&s!==void 0?s:[]],extraPresets:t.opts.extraPresets,compact:!0,sourceMaps:D,inputSourceMap:n,ast:!1,babelrc:!1,configFile:!1,comments:!1});(0,J.strict)(S,"[Reanimated] `transformed` is null.");let M;return D&&(Yt()?M=Jt:(M=Ut.fromObject(S.map).toObject(),delete M.sourcesContent)),[S.code,JSON.stringify(M)]}_.buildWorkletString=Xt;function $t(e,t){(0,we.traverse)(e,{FunctionExpression(r){if(!r.node.id){r.stop();return}let i=r.node.id.name;r.scope.rename(i,t)}})}function Yt(){return process.env.REANIMATED_JEST_SHOULD_MOCK_SOURCE_MAP==="1"}function Kt(e,t,r){t.length===0||!(0,c.isProgram)(e.parent)||(0,c.isExpression)(e.node.body)||e.node.body.body.unshift(r)}function Qt(e){var t;(0,c.isProgram)(e.parent)&&!(0,c.isArrowFunctionExpression)(e.node)&&!(0,c.isObjectMethod)(e.node)&&e.node.id&&e.scope.parent&&((t=e.scope.parent.bindings[e.node.id.name])===null||t===void 0?void 0:t.references)>0&&e.node.body.body.unshift((0,c.variableDeclaration)("const",[(0,c.variableDeclarator)((0,c.identifier)(e.node.id.name),(0,c.memberExpression)((0,c.thisExpression)(),(0,c.identifier)("_recur")))]))}function er(e){let t=(0,c.variableDeclaration)("const",[(0,c.variableDeclarator)((0,c.objectPattern)(e.map(r=>(0,c.objectProperty)((0,c.identifier)(r.name),(0,c.identifier)(r.name),!1,!0))),(0,c.memberExpression)((0,c.thisExpression)(),(0,c.identifier)("__closure")))]);return{visitor:{"FunctionDeclaration|FunctionExpression|ArrowFunctionExpression|ObjectMethod":r=>{Kt(r,e,t),Qt(r)}}}}});var De=p(T=>{"use strict";var tr=T&&T.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(T,"__esModule",{value:!0});T.makeWorkletFactory=void 0;var rr=require("@babel/core"),nr=tr(require("@babel/generator")),o=require("@babel/types"),j=require("assert"),Fe=require("path"),ir=le(),or=K(),je=w(),ce=z(),sr=Ce(),ar=require("../package.json").version,lr="x.y.z";function cr(e,t){var r;ur(e),(0,j.strict)(t.file.opts.filename,"[Reanimated] `state.file.opts.filename` is undefined.");let i=(0,nr.default)(e.node,{sourceMaps:!0,sourceFileName:t.file.opts.filename});i.code="("+(e.isObjectMethod()?"function ":"")+i.code+`
)`;let n=(0,or.workletTransformSync)(i.code,{extraPlugins:[...br,...(r=t.opts.extraPlugins)!==null&&r!==void 0?r:[]],extraPresets:t.opts.extraPresets,filename:t.file.opts.filename,ast:!0,babelrc:!1,configFile:!1,inputSourceMap:i.map});(0,j.strict)(n,"[Reanimated] `transformed` is undefined."),(0,j.strict)(n.ast,"[Reanimated] `transformed.ast` is undefined.");let s=mr(n.ast,e),u=s.map(m=>e.scope.generateUidIdentifier(m.name));s.forEach((m,A)=>{e.scope.rename(s[A].name,u[A].name,e.node)});let a=(0,o.cloneNode)(e.node),y=(0,o.isBlockStatement)(a.body)?(0,o.functionExpression)(null,a.params,a.body,a.generator,a.async):a,{workletName:d,reactName:I}=pr(e,t),[D,S]=(0,sr.buildWorkletString)(n.ast,t,s,d,n.map);(0,j.strict)(D,"[Reanimated] `funString` is undefined.");let M=fr(D),O=1;s.length>0&&(O-=s.length+2);let h=e.parentPath.isProgram()?e:e.findParent(m=>{var A,ae;return(ae=(A=m.parentPath)===null||A===void 0?void 0:A.isProgram())!==null&&ae!==void 0?ae:!1});(0,j.strict)(h,"[Reanimated] `pathForStringDefinitions` is null."),(0,j.strict)(h.parentPath,"[Reanimated] `pathForStringDefinitions.parentPath` is null.");let X=h.parentPath.scope.generateUidIdentifier(`worklet_${M}_init_data`),R=(0,o.objectExpression)([(0,o.objectProperty)((0,o.identifier)("code"),(0,o.stringLiteral)(D))]);if(!(0,ce.isRelease)()){let m=t.file.opts.filename;t.opts.relativeSourceLocation&&(m=(0,Fe.relative)(t.cwd,m),S=S==null?void 0:S.replace(t.file.opts.filename,m)),R.properties.push((0,o.objectProperty)((0,o.identifier)("location"),(0,o.stringLiteral)(m)))}S&&R.properties.push((0,o.objectProperty)((0,o.identifier)("sourceMap"),(0,o.stringLiteral)(S))),!(0,ce.isRelease)()&&R.properties.push((0,o.objectProperty)((0,o.identifier)("version"),(0,o.stringLiteral)(dr()?lr:ar)));let ke=!t.opts.omitNativeOnlyData;ke&&h.insertBefore((0,o.variableDeclaration)("const",[(0,o.variableDeclarator)(X,R)])),(0,j.strict)(!(0,o.isFunctionDeclaration)(y),"[Reanimated] `funExpression` is a `FunctionDeclaration`."),(0,j.strict)(!(0,o.isObjectMethod)(y),"[Reanimated] `funExpression` is an `ObjectMethod`.");let H=[(0,o.variableDeclaration)("const",[(0,o.variableDeclarator)((0,o.identifier)(I),y)]),(0,o.expressionStatement)((0,o.assignmentExpression)("=",(0,o.memberExpression)((0,o.identifier)(I),(0,o.identifier)("__closure"),!1),(0,o.objectExpression)(s.map(m=>m.name.endsWith(je.workletClassFactorySuffix)?(0,o.objectProperty)((0,o.identifier)(m.name),(0,o.memberExpression)((0,o.identifier)(m.name.slice(0,m.name.length-je.workletClassFactorySuffix.length)),(0,o.identifier)(m.name))):(0,o.objectProperty)((0,o.identifier)(m.name),(0,o.identifier)(m.name),!1,!0))))),(0,o.expressionStatement)((0,o.assignmentExpression)("=",(0,o.memberExpression)((0,o.identifier)(I),(0,o.identifier)("__workletHash"),!1),(0,o.numericLiteral)(M)))];return ke&&H.push((0,o.expressionStatement)((0,o.assignmentExpression)("=",(0,o.memberExpression)((0,o.identifier)(I),(0,o.identifier)("__initData"),!1),X))),(0,ce.isRelease)()||(H.unshift((0,o.variableDeclaration)("const",[(0,o.variableDeclarator)((0,o.identifier)("_e"),(0,o.arrayExpression)([(0,o.newExpression)((0,o.memberExpression)((0,o.identifier)("global"),(0,o.identifier)("Error")),[]),(0,o.numericLiteral)(O),(0,o.numericLiteral)(-27)]))])),H.push((0,o.expressionStatement)((0,o.assignmentExpression)("=",(0,o.memberExpression)((0,o.identifier)(I),(0,o.identifier)("__stackDetails"),!1),(0,o.identifier)("_e"))))),H.push((0,o.returnStatement)((0,o.identifier)(I))),{workletFactory:(0,o.functionExpression)((0,o.identifier)(d+"Factory"),u,(0,o.blockStatement)(H)),closureVariables:s}}T.makeWorkletFactory=cr;function ur(e){e.traverse({DirectiveLiteral(t){t.node.value==="worklet"&&t.getFunctionParent()===e&&t.parentPath.remove()}})}function dr(){return process.env.REANIMATED_JEST_SHOULD_MOCK_VERSION==="1"}function fr(e){let t=e.length,r=5381,i=52711;for(;t--;){let n=e.charCodeAt(t);r=r*33^n,i=i*33^n}return(r>>>0)*4096+(i>>>0)}function pr(e,t){let r="unknownFile";if(t.file.opts.filename){let u=t.file.opts.filename;r=(0,Fe.basename)(u);let a=u.split("/"),y=a.indexOf("node_modules");y!==-1&&(r=`${a[y+1]}_${r}`)}let i=`${r}${t.workletNumber++}`,n="";(0,o.isObjectMethod)(e.node)&&(0,o.isIdentifier)(e.node.key)?n=e.node.key.name:((0,o.isFunctionDeclaration)(e.node)||(0,o.isFunctionExpression)(e.node))&&(0,o.isIdentifier)(e.node.id)&&(n=e.node.id.name);let s=n?(0,o.toIdentifier)(`${n}_${i}`):(0,o.toIdentifier)(i);return n=n||(0,o.toIdentifier)(i),{workletName:s,reactName:n}}function mr(e,t){let r=new Map,i=new Map;return(0,rr.traverse)(e,{Identifier(n){if(!n.isReferencedIdentifier())return;let s=n.node.name;if(ir.globals.has(s)||"id"in t.node&&t.node.id&&t.node.id.name===s)return;let u=n.parent;if((0,o.isMemberExpression)(u)&&u.property===n.node&&!u.computed||(0,o.isObjectProperty)(u)&&(0,o.isObjectExpression)(n.parentPath.parent)&&n.node!==u.value)return;let a=n.scope;for(;a!=null;){if(a.bindings[s]!=null)return;a=a.parent}r.set(s,n.node),i.set(s,!1)}}),t.traverse({Identifier(n){if(!n.isReferencedIdentifier())return;let s=r.get(n.node.name);!s||i.get(n.node.name)||(s.loc=n.node.loc,i.set(n.node.name,!0))}}),Array.from(r.values())}var br=[require.resolve("@babel/plugin-transform-shorthand-properties"),require.resolve("@babel/plugin-transform-arrow-functions"),require.resolve("@babel/plugin-transform-optional-chaining"),require.resolve("@babel/plugin-transform-nullish-coalescing-operator"),[require.resolve("@babel/plugin-transform-template-literals"),{loose:!0}]]});var Me=p(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.makeWorkletFactoryCall=void 0;var yr=require("@babel/types"),kr=De();function gr(e,t){let{workletFactory:r,closureVariables:i}=(0,kr.makeWorkletFactory)(e,t),n=(0,yr.callExpression)(r,i);return _r(e,n),n}Q.makeWorkletFactoryCall=gr;function _r(e,t){let r=e.node.loc;r&&(t.callee.loc={filename:r.filename,identifierName:r.identifierName,start:r.start,end:r.start})}});var ee=p(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.substituteObjectMethodWithObjectProperty=F.processWorklet=F.processIfWithWorkletDirective=void 0;var ue=require("@babel/types"),vr=w(),Or=z(),hr=Me();function Re(e,t){return!(0,ue.isBlockStatement)(e.node.body)||!Er(e.node.body.directives)?!1:(Ae(e,t),!0)}F.processIfWithWorkletDirective=Re;function Ae(e,t){t.opts.processNestedWorklets&&e.traverse({[vr.WorkletizableFunction](i,n){Re(i,n)}},t);let r=(0,hr.makeWorkletFactoryCall)(e,t);Ir(e,r)}F.processWorklet=Ae;function Er(e){return e.some(t=>(0,ue.isDirectiveLiteral)(t.value)&&t.value.value==="worklet")}function Ir(e,t){var r;if(e.isObjectMethod())Pe(e,t);else{let i="id"in e.node?(r=e.node.id)===null||r===void 0?void 0:r.name:void 0;(0,Or.replaceWithFactoryCall)(e,i,t)}}function Pe(e,t){let r=(0,ue.objectProperty)(e.node.key,t);e.replaceWith(r)}F.substituteObjectMethodWithObjectProperty=Pe});var ze=p(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.processWorkletizableObject=void 0;var Sr=w(),qe=ee();function xr(e,t){let r=e.get("properties");for(let i of r)if(i.isObjectMethod())(0,qe.processWorklet)(i,t);else if(i.isObjectProperty()){let n=i.get("value");(0,Sr.isWorkletizableFunctionPath)(n)&&(0,qe.processWorklet)(n,t)}else throw new Error(`[Reanimated] '${i.type}' as to-be workletized argument is not supported for object hooks.`)}te.processWorkletizableObject=xr});var Le=p(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});re.findReferencedWorklet=void 0;var N=w();function de(e,t,r){let i=e.node.name,s=e.scope.getBinding(i);return s?t&&s.path.isFunctionDeclaration()?s.path:s.constant?Wr(s,t,r):wr(s,t,r):void 0}re.findReferencedWorklet=de;function Wr(e,t,r){let i=e.path;if(!i.isVariableDeclarator())return;let n=i.get("init");if(t&&(0,N.isWorkletizableFunctionPath)(n)||r&&(0,N.isWorkletizableObjectPath)(n))return n;if(n.isIdentifier()&&n.isReferencedIdentifier())return de(n,t,r)}function wr(e,t,r){let i=e.constantViolations.reverse().find(s=>s.isAssignmentExpression()&&(t&&(0,N.isWorkletizableFunctionPath)(s.get("right"))||r&&(0,N.isWorkletizableObjectPath)(s.get("right"))));if(!i||!i.isAssignmentExpression())return;let n=i.get("right");if(t&&(0,N.isWorkletizableFunctionPath)(n)||r&&(0,N.isWorkletizableObjectPath)(n))return n;if(n.isIdentifier()&&n.isReferencedIdentifier())return de(n,t,r)}});var He=p(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.processCalleesAutoworkletizableCallbacks=B.processIfAutoworkletizableCallback=void 0;var Te=require("@babel/types"),fe=Oe(),Cr=Ie(),jr=ze(),Fr=Le(),ne=w(),Ge=ee(),Ne=new Set(["useAnimatedGestureHandler","useAnimatedScrollHandler"]),Be=new Set(["useFrameCallback","useAnimatedStyle","useAnimatedProps","createAnimatedPropAdapter","useDerivedValue","useAnimatedScrollHandler","useAnimatedReaction","useWorkletCallback","withTiming","withSpring","withDecay","withRepeat","runOnUI","executeOnUIRuntimeSync"]),Dr=new Map([["useAnimatedGestureHandler",[0]],["useFrameCallback",[0]],["useAnimatedStyle",[0]],["useAnimatedProps",[0]],["createAnimatedPropAdapter",[0]],["useDerivedValue",[0]],["useAnimatedScrollHandler",[0]],["useAnimatedReaction",[0,1]],["useWorkletCallback",[0]],["withTiming",[2]],["withSpring",[2]],["withDecay",[1]],["withRepeat",[3]],["runOnUI",[0]],["executeOnUIRuntimeSync",[0]],...Array.from(fe.gestureHandlerBuilderMethods).map(e=>[e,[0]])]);function Mr(e,t){return(0,fe.isGestureHandlerEventCallback)(e)||(0,Cr.isLayoutAnimationCallback)(e)?((0,Ge.processWorklet)(e,t),!0):!1}B.processIfAutoworkletizableCallback=Mr;function Rr(e,t){let r=(0,Te.isSequenceExpression)(e.node.callee)?e.node.callee.expressions[e.node.callee.expressions.length-1]:e.node.callee,i="name"in r?r.name:"property"in r&&"name"in r.property?r.property.name:void 0;if(i!==void 0){if(Be.has(i)||Ne.has(i)){let n=Be.has(i),s=Ne.has(i),u=Dr.get(i),a=e.get("arguments").filter((y,d)=>u.includes(d));Ue(a,t,n,s)}else if(!(0,Te.isV8IntrinsicIdentifier)(r)&&(0,fe.isGestureObjectEventCallbackMethod)(r)){let n=e.get("arguments");Ue(n,t,!0,!0)}}}B.processCalleesAutoworkletizableCallbacks=Rr;function Ue(e,t,r,i){e.forEach(n=>{let s=Ar(n,r,i);s&&((0,ne.isWorkletizableFunctionPath)(s)?(0,Ge.processWorklet)(s,t):(0,ne.isWorkletizableObjectPath)(s)&&(0,jr.processWorkletizableObject)(s,t))})}function Ar(e,t,r){if(t&&(0,ne.isWorkletizableFunctionPath)(e)||r&&(0,ne.isWorkletizableObjectPath)(e))return e;if(e.isIdentifier()&&e.isReferencedIdentifier())return(0,Fr.findReferencedWorklet)(e,t,r)}});var Xe=p(U=>{"use strict";var Ve=U&&U.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(U,"__esModule",{value:!0});U.processIfWorkletClass=void 0;var Pr=Ve(require("@babel/generator")),qr=Ve(require("@babel/traverse")),l=require("@babel/types"),ie=require("assert"),zr=K(),Lr=w(),Tr=z(),Ze="__workletClass";function Nr(e,t){return Qr(e,t)?(Jr(e.node.body),Br(e,t),!0):!1}U.processIfWorkletClass=Nr;function Br(e,t){(0,ie.strict)(e.node.id);let r=e.node.id.name,i=Ur(e.node,t);Xr(i),Gr(i.program.body),Hr(i.program.body,r),i.program.body.push((0,l.returnStatement)((0,l.identifier)(r)));let n=(0,l.functionExpression)(null,[],(0,l.blockStatement)([...i.program.body])),s=(0,l.callExpression)(n,[]);(0,Tr.replaceWithFactoryCall)(e,r,s)}function Ur(e,t){var r;let i=(0,Pr.default)(e).code,n=(0,zr.workletTransformSync)(i,{extraPlugins:["@babel/plugin-transform-class-properties","@babel/plugin-transform-classes","@babel/plugin-transform-unicode-regex",...(r=t.opts.extraPlugins)!==null&&r!==void 0?r:[]],extraPresets:t.opts.extraPresets,filename:t.file.opts.filename,ast:!0,babelrc:!1,configFile:!1});return(0,ie.strict)(n&&n.ast),n.ast}function Gr(e){e.forEach(t=>{if((0,l.isFunctionDeclaration)(t)){let r=(0,l.directive)((0,l.directiveLiteral)("worklet"));t.body.directives.push(r)}})}function Hr(e,t){let r=t+Lr.workletClassFactorySuffix,i=Vr(e,t),s=e[i].declarations[0].init,u=(0,l.functionDeclaration)((0,l.identifier)(r),[],(0,l.blockStatement)([(0,l.variableDeclaration)("const",[(0,l.variableDeclarator)((0,l.identifier)(t),s)]),(0,l.expressionStatement)((0,l.assignmentExpression)("=",(0,l.memberExpression)((0,l.identifier)(t),(0,l.identifier)(r)),(0,l.identifier)(r))),(0,l.returnStatement)((0,l.identifier)(t))],[(0,l.directive)((0,l.directiveLiteral)("worklet"))])),a=(0,l.variableDeclaration)("const",[(0,l.variableDeclarator)((0,l.identifier)(t),(0,l.callExpression)((0,l.identifier)(r),[]))]);e.splice(i,1,u,a)}function Vr(e,t){let r=e.findIndex(i=>(0,l.isVariableDeclaration)(i)&&i.declarations.some(n=>(0,l.isIdentifier)(n.id)&&n.id.name===t));return(0,ie.strict)(r>=0),r}function Zr(e){return e.body.some(t=>(0,l.isClassProperty)(t)&&(0,l.isIdentifier)(t.key)&&t.key.name===Ze)}function Jr(e){e.body=e.body.filter(t=>!(0,l.isClassProperty)(t)||!(0,l.isIdentifier)(t.key)||t.key.name!==Ze)}function Xr(e){let t=$r(e),r=Yr(t),i=t.map(a=>a.index),n=r.map(a=>a.index),s=e.program.body,u=[...s];for(let a=0;a<t.length;a++){let y=n[a],d=i[a],I=u[y];s[d]=I}}function $r(e){let t=[];return(0,qr.default)(e,{Program:{enter:r=>{r.get("body").forEach((n,s)=>{var u;let a=n.getBindingIdentifiers();if(!n.isFunctionDeclaration()||!(!((u=n.node.id)===null||u===void 0)&&u.name))return;let y={name:n.node.id.name,index:s,dependencies:new Set};t.push(y),n.traverse({Identifier(d){Kr(d,a,n)&&y.dependencies.add(d.node.name)}})})}}}),t}function Yr(e){let t=[],r=new Set;for(let i of e)Je(i,e,t,r);return t}function Je(e,t,r,i){if(i.has(e.name))throw new Error("Cycle detected. This should never happen.");if(!r.find(n=>n.name===e.name)){i.add(e.name);for(let n of e.dependencies)if(!r.find(s=>s.name===n)){let s=t.find(u=>u.name===n);(0,ie.strict)(s),Je(s,t,r,i)}r.push(e),i.delete(e.name)}}function Kr(e,t,r){return e.isReferencedIdentifier()&&!(e.node.name in t)&&!r.scope.hasOwnBinding(e.node.name)&&r.scope.hasReference(e.node.name)}function Qr(e,t){var r;let i=(r=e.node.id)===null||r===void 0?void 0:r.name,n=e.node;if(!i)return!1;let s=Zr(n.body),u=t.classesToWorkletize.some(d=>d.node===n),a=e.parentPath.isProgram()&&t.classesToWorkletize.some(d=>d.name===i);return t.classesToWorkletize=t.classesToWorkletize.filter(d=>d.node!==n&&d.name!==i),s||u||a}});var pe=p(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});E.isContextObject=E.processIfWorkletContextObject=E.contextObjectMarker=void 0;var v=require("@babel/types");E.contextObjectMarker="__workletContextObject";function en(e,t){return $e(e.node)?(rn(e.node),tn(e.node),!0):!1}E.processIfWorkletContextObject=en;function $e(e){return e.properties.some(t=>(0,v.isObjectProperty)(t)&&(0,v.isIdentifier)(t.key)&&t.key.name===E.contextObjectMarker)}E.isContextObject=$e;function tn(e){let t=(0,v.functionExpression)(null,[],(0,v.blockStatement)([(0,v.returnStatement)((0,v.cloneNode)(e))],[(0,v.directive)((0,v.directiveLiteral)("worklet"))]));e.properties.push((0,v.objectProperty)((0,v.identifier)(`${E.contextObjectMarker}Factory`),t))}function rn(e){e.properties=e.properties.filter(t=>!((0,v.isObjectProperty)(t)&&(0,v.isIdentifier)(t.key)&&t.key.name===E.contextObjectMarker))}});var tt=p(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.isImplicitContextObject=G.processIfWorkletFile=void 0;var b=require("@babel/types"),Ye=pe(),Ke=w();function nn(e,t){return e.node.directives.some(r=>r.value.value==="worklet")?(e.node.directives=e.node.directives.filter(r=>r.value.value!=="worklet"),on(e,t),!0):!1}G.processIfWorkletFile=nn;function on(e,t){let r=e.get("body");pn(e.node),r.forEach(i=>{let n=sn(i);me(n,t)})}function sn(e){return e.isExportNamedDeclaration()||e.isExportDefaultDeclaration()?e.get("declaration"):e}function me(e,t){var r;(0,Ke.isWorkletizableFunctionPath)(e)?(e.isArrowFunctionExpression()&&cn(e.node),Qe(e.node.body)):(0,Ke.isWorkletizableObjectPath)(e)?et(e)?un(e.node):ln(e,t):e.isVariableDeclaration()?an(e,t):e.isClassDeclaration()&&(fn(e.node.body),!((r=e.node.id)===null||r===void 0)&&r.name&&t.classesToWorkletize.push({node:e.node,name:e.node.id.name}))}function an(e,t){e.get("declarations").forEach(i=>{let n=i.get("init");n.isExpression()&&me(n,t)})}function ln(e,t){e.get("properties").forEach(i=>{if(i.isObjectMethod())Qe(i.node.body);else if(i.isObjectProperty()){let n=i.get("value");me(n,t)}})}function cn(e){(0,b.isBlockStatement)(e.body)||(e.body=(0,b.blockStatement)([(0,b.returnStatement)(e.body)]))}function Qe(e){e.directives.some(t=>t.value.value==="worklet")||e.directives.push((0,b.directive)((0,b.directiveLiteral)("worklet")))}function un(e){e.properties.some(t=>(0,b.isObjectProperty)(t)&&(0,b.isIdentifier)(t.key)&&t.key.name===Ye.contextObjectMarker)||e.properties.push((0,b.objectProperty)((0,b.identifier)(`${Ye.contextObjectMarker}`),(0,b.booleanLiteral)(!0)))}function et(e){return e.get("properties").some(r=>r.isObjectMethod()?dn(r):!1)}G.isImplicitContextObject=et;function dn(e){let t=!1;return e.traverse({ThisExpression(r){t=!0,r.stop()}}),t}function fn(e){e.body.push((0,b.classProperty)((0,b.identifier)("__workletClass"),(0,b.booleanLiteral)(!0)))}function pn(e){let t=e.body,r=t.length,i=0;for(;i<r;){let n=t[i];if(!mn(n)){i++;continue}let s=t.splice(i,1);t.push(...s),r--}}function mn(e){return(0,b.isExpressionStatement)(e)&&(0,b.isAssignmentExpression)(e.expression)&&(0,b.isMemberExpression)(e.expression.left)&&(0,b.isIdentifier)(e.expression.left.object)&&e.expression.left.object.name==="exports"}});var rt=p(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.processInlineStylesWarning=void 0;var f=require("@babel/types"),be=require("assert"),bn=z();function yn(e){return(0,f.callExpression)((0,f.arrowFunctionExpression)([],(0,f.blockStatement)([(0,f.expressionStatement)((0,f.callExpression)((0,f.memberExpression)((0,f.identifier)("console"),(0,f.identifier)("warn")),[(0,f.callExpression)((0,f.memberExpression)((0,f.callExpression)((0,f.identifier)("require"),[(0,f.stringLiteral)("react-native-reanimated")]),(0,f.identifier)("getUseOfValueInStyleWarning")),[])])),(0,f.returnStatement)(e.node)])),[])}function kn(e){e.isMemberExpression()&&(0,f.isIdentifier)(e.node.property)&&e.node.property.name==="value"&&e.replaceWith(yn(e))}function gn(e){if((0,f.isArrayExpression)(e.node)){let t=e.get("elements");(0,be.strict)(Array.isArray(t),"[Reanimated] `elements` should be an array.");for(let r of t)r.isObjectExpression()&&ye(r)}}function ye(e){let t=e.get("properties");for(let r of t)if(r.isObjectProperty()){let i=r.get("value");(0,f.isIdentifier)(r.node.key)&&r.node.key.name==="transform"?gn(i):kn(i)}}function _n(e,t){if((0,bn.isRelease)()||t.opts.disableInlineStylesWarning||e.node.name.name!=="style"||!(0,f.isJSXExpressionContainer)(e.node.value))return;let r=e.get("value").get("expression");if((0,be.strict)(!Array.isArray(r),"[Reanimated] `expression` should not be an array."),r.isArrayExpression()){let i=r.get("elements");(0,be.strict)(Array.isArray(i),"[Reanimated] `elements` should be an array.");for(let n of i)n.isObjectExpression()&&ye(n)}else r.isObjectExpression()&&ye(r)}oe.processInlineStylesWarning=_n});var it=p(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.substituteWebCallExpression=void 0;var nt=require("@babel/types");function vn(e){let t=e.node.callee;if((0,nt.isIdentifier)(t)){let r=t.name;(r==="isWeb"||r==="shouldBeUseWeb")&&e.replaceWith((0,nt.booleanLiteral)(!0))}}se.substituteWebCallExpression=vn});Object.defineProperty(exports,"__esModule",{value:!0});var ot=He(),On=Xe(),hn=pe(),En=tt(),In=le(),Sn=rt(),xn=w(),Wn=it(),wn=ee();module.exports=function(){function e(t){try{t()}catch(r){throw new Error(`[Reanimated] Babel plugin exception: ${r}`)}}return{name:"reanimated",pre(){e(()=>{(0,In.initializeState)(this)})},visitor:{CallExpression:{enter(t,r){e(()=>{(0,ot.processCalleesAutoworkletizableCallbacks)(t,r),r.opts.substituteWebPlatformChecks&&(0,Wn.substituteWebCallExpression)(t)})}},[xn.WorkletizableFunction]:{enter(t,r){e(()=>{(0,wn.processIfWithWorkletDirective)(t,r)||(0,ot.processIfAutoworkletizableCallback)(t,r)})}},ObjectExpression:{enter(t,r){e(()=>{(0,hn.processIfWorkletContextObject)(t,r)})}},ClassDeclaration:{enter(t,r){e(()=>{(0,On.processIfWorkletClass)(t,r)})}},Program:{enter(t,r){e(()=>{(0,En.processIfWorkletFile)(t,r)})}},JSXAttribute:{enter(t,r){e(()=>(0,Sn.processInlineStylesWarning)(t,r))}}}}};
//# sourceMappingURL=index.js.map
